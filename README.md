TODO:
 - [ ] Unit tests
 - [ ] Clean up code with named parameters
 - [ ] Writing raw buffers
 - [ ] Writing raw MQTT connection
